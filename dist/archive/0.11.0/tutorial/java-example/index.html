<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.35" />
    <meta name="description" content="Documentation for Fission">
<meta name="google-site-verification" content="5AvQfeDvIx0ldE9uSKVsoikqgFknd_CT18caf9TNoVg" />
<meta name="author" content="Fission">

    <link rel="shortcut icon" href=/0.11.0/images/favicon.png type="image/x-icon" />
<link rel="icon" href=/0.11.0/images/favicon.png type="image/x-icon" />

    <title>Building Java Functions :: Serverless Functions for Kubernetes</title>
    
    
    <link href="/0.11.0/css/nucleus.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/font-awesome.min.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/hybrid.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/featherlight.min.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/perfect-scrollbar.min.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/auto-complete.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/theme.css?1538416554" rel="stylesheet">
    <link href="/0.11.0/css/hugo-theme.css?1538416554" rel="stylesheet">
    
      <link href="/0.11.0/css/theme-fission.css?1538416554" rel="stylesheet">
    

    <script src="/0.11.0/js/jquery-2.x.min.js?1538416554"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/0.11.0/tutorial/java-example/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://fission.io/">
  <img src=/0.11.0/images/fission-logo.png>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/0.11.0/js/lunr.min.js?1538416554"></script>
<script type="text/javascript" src="/0.11.0/js/auto-complete.js?1538416554"></script>
<script type="text/javascript">
    
        var baseurl = '\/0.11.0';
    
</script>
<script type="text/javascript" src="/0.11.0/js/search.js?1538416554"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/0.11.0/installation/" title="Installing Fission" class="dd-item 
        
        
        parent
        ">
      <a href="/0.11.0/installation/">
          Installing Fission
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/installation/kubernetessetup/" title="Kubernetes Quick Install" class="dd-item ">
        <a href="/0.11.0/installation/kubernetessetup/">
        Kubernetes Quick Install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.11.0/installation/upgrade/" title="Upgrading Fission" class="dd-item 
        
        
        
        ">
      <a href="/0.11.0/installation/upgrade/">
          Upgrading Fission
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/installation/env_vars/" title="Environment Variables" class="dd-item ">
        <a href="/0.11.0/installation/env_vars/">
        Environment Variables
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.11.0/concepts/" title="Fission Concepts" class="dd-item 
        
        
        parent
        ">
      <a href="/0.11.0/concepts/">
          Fission Concepts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/concepts/basic-concept/" title="Basic Concepts" class="dd-item ">
        <a href="/0.11.0/concepts/basic-concept/">
        Basic Concepts
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/concepts/executor/" title="Fission Function Executors" class="dd-item ">
        <a href="/0.11.0/concepts/executor/">
        Fission Function Executors
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.11.0/usage/" title="Using Fission" class="dd-item 
        
        
        parent
        ">
      <a href="/0.11.0/usage/">
          Using Fission
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/package/" title="Packaging source code" class="dd-item ">
        <a href="/0.11.0/usage/package/">
        Packaging source code
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/access-secret-cfgmap-in-function/" title="Accessing Secrets in Functions" class="dd-item ">
        <a href="/0.11.0/usage/access-secret-cfgmap-in-function/">
        Accessing Secrets in Functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/environments/" title="Environments" class="dd-item ">
        <a href="/0.11.0/usage/environments/">
        Environments
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/functions/" title="Functions" class="dd-item ">
        <a href="/0.11.0/usage/functions/">
        Functions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/trigger/" title="Triggers" class="dd-item ">
        <a href="/0.11.0/usage/trigger/">
        Triggers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/executor/" title="Controlling Function Execution" class="dd-item ">
        <a href="/0.11.0/usage/executor/">
        Controlling Function Execution
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/developer-workflow/" title="Source Code Organization and Your Development Workflow" class="dd-item ">
        <a href="/0.11.0/usage/developer-workflow/">
        Source Code Organization and Your Development Workflow
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/usage/ingress-tutorial/" title="Exposing functions with Ingress" class="dd-item ">
        <a href="/0.11.0/usage/ingress-tutorial/">
        Exposing functions with Ingress
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.11.0/contributing/" title="Contributing to Fission" class="dd-item 
        
        
        parent
        ">
      <a href="/0.11.0/contributing/">
          Contributing to Fission
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/contributing/compiling/" title="Compiling Fission" class="dd-item ">
        <a href="/0.11.0/contributing/compiling/">
        Compiling Fission
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.11.0/tutorial/" title="Tutorials" class="dd-item 
        parent
        
        
        ">
      <a href="/0.11.0/tutorial/">
          Tutorials
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/tutorial/enabling-istio-on-fission/" title="Enabling Istio on Fission" class="dd-item ">
        <a href="/0.11.0/tutorial/enabling-istio-on-fission/">
        Enabling Istio on Fission
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.11.0/tutorial/java-example/" title="Building Java Functions" class="dd-item active">
        <a href="/0.11.0/tutorial/java-example/">
        Building Java Functions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.11.0/workflows/" title="Fission Workflows" class="dd-item 
        
        
        
        ">
      <a href="/0.11.0/workflows/">
          Fission Workflows
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/fission/fission"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li class="" role=""> 
                  <a class="padding" href="https://github.com/fission/fission/graphs/contributors"><i class='fa fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/fission/docs.fission.io/edit/master/docs/content/tutorial/java-example.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/0.11.0/'>Fission</a> > <a href='/0.11.0/tutorial/'>Tutorials</a> > Building Java Functions
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li><a href="#jvm-environment">JVM Environment</a></li>
<li><a href="#fission-contract">Fission contract</a></li>
<li><a href="#building-a-function">Building a function</a>
<ul>
<li><a href="#source-code-test">Source code &amp; test</a></li>
<li><a href="#project-dependencies-with-maven">Project &amp; dependencies with Maven</a></li>
<li><a href="#building-the-package">Building the package</a></li>
<li><a href="#deploying-the-function">Deploying the function</a></li>
</ul></li>
<li><a href="#what-s-next">What&rsquo;s next</a></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Building Java Functions</h1>
          

        




<p>With the <a href="https://github.com/fission/fission/tree/master/environments/jvm">JVM environment</a> there is now support to use Java functions in Fission. This tutorial explains about the working and some inner details of the way Java functions work in Fission.</p>

<p>To see this Java support in action, we are going to build a simple &ldquo;Hello World&rdquo; function with the JVM environment. This example can also be found in <a href="https://github.com/fission/fission/tree/master/examples/jvm/java">examples directory on GitHub</a>.</p>

<h1 id="jvm-environment">JVM Environment</h1>

<p>The JVM environment in Fission is based on <a href="https://spring.io/projects/spring-boot">Spring boot</a> and <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html">Spring web frameworks</a>. Spring boot &amp; web is already loaded in JVM and if you are using this dependency, you can mark it at provided scope. The environment loads the function code from JAR file during specialization and then executes it.</p>

<h1 id="fission-contract">Fission contract</h1>

<p>A function needs to implement the <code>io.fission.Function</code> class and override the <code>call</code> method. The call method receives the <code>RequestEntity</code> and <code>Context</code> as inputs and needs to return <code>ResponseEntity</code> object. Both <code>RequestEntity</code> and <code>ResponseEntity</code> are from <code>org.springframework.http</code> package and provide a fairly high level and rich API to interact with request and response.</p>

<pre><code>ResponseEntity call(RequestEntity req, Context context);
</code></pre>

<p>The <code>Context</code> object is a placeholder to interact with the platform and provide information about the platform to the code. This also is a extension mechanism to provide more information to runtime code in future.</p>

<h1 id="building-a-function">Building a function</h1>

<h2 id="source-code-test">Source code &amp; test</h2>

<p>The function code responds with &ldquo;Hello World&rdquo; in response body.</p>

<pre><code>public class HelloWorld implements Function {

	@Override
	public ResponseEntity&lt;?&gt; call(RequestEntity req, Context context) {
		return ResponseEntity.ok(&quot;Hello World!&quot;);
	}

}
</code></pre>

<h2 id="project-dependencies-with-maven">Project &amp; dependencies with Maven</h2>

<p>First you have to define the the basic information about the function:</p>

<pre><code>	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;io.fission&lt;/groupId&gt;
	&lt;artifactId&gt;hello-world&lt;/artifactId&gt;
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;JAR&lt;/packaging&gt;

	&lt;name&gt;hello-world&lt;/name&gt;
</code></pre>

<p>You will have to add two dependencies which are provided by the function runtime, so both them of scope as provided.</p>

<pre><code>	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
			&lt;version&gt;2.0.1.RELEASE&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;io.fission&lt;/groupId&gt;
			&lt;artifactId&gt;fission-java-core&lt;/artifactId&gt;
			&lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;
</code></pre>

<p>One of the key things when packaging the Java function is to package it as a uber/fat JAR so that the class and all other dependencies are packaged with function. For that you can use <code>maven-assembly-plugin</code>:</p>

<pre><code>&lt;execution&gt;
	&lt;id&gt;make-assembly&lt;/id&gt; &lt;!-- this is used for inheritance merges --&gt;
	&lt;phase&gt;package&lt;/phase&gt; &lt;!-- bind to the packaging phase --&gt;
	&lt;goals&gt;
		&lt;goal&gt;single&lt;/goal&gt;
	&lt;/goals&gt;
&lt;/execution&gt;
</code></pre>

<p>Lastly since the <code>fission-java-core</code> is currently in the snapshot release, you need to explicitely add the sonatype repository which is where it is published.</p>

<pre><code>	&lt;repositories&gt;
		&lt;repository&gt;
			&lt;id&gt;fission-java-core&lt;/id&gt;
			&lt;name&gt;fission-java-core-snapshot&lt;/name&gt;
			&lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots/&lt;/url&gt;
		&lt;/repository&gt;
	&lt;/repositories&gt;
</code></pre>

<h2 id="building-the-package">Building the package</h2>

<p>For building the source Java code with Maven, you either need Maven and Java installed locally or you can use the <code>build.sh</code> helper script which builds the code inside a docker image which has those dependencies.</p>

<pre><code>docker run -it --rm  -v &quot;$(pwd)&quot;:/usr/src/mymaven -w /usr/src/mymaven maven:3.5-jdk-8 mvn clean package
</code></pre>

<p>At this stage we assume that build succeeded and you have the JAR file of the function ready.</p>

<h2 id="deploying-the-function">Deploying the function</h2>

<p>First you will need to create an environment. The <code>extract</code> flag is important for Java based applications packaged as JAR file. This flag will ensure that the fetcher won&rsquo;t extract the JAR file into a directory. Currently JVM environment only supports version 2 &amp; above so we specify the environment version as 2</p>

<pre><code>$ fission env create --name jvm --image fission/jvm-env --version 2 --extract=false
</code></pre>

<p>When creating the function we provide the JAR file built in earlier steps and the environment. The entrypoint signifies the fully qualified name of the class which implements the Fission&rsquo;s <code>Function</code> interface.</p>

<pre><code>$ fission fn create --name hello --deploy target/hello-world-1.0-SNAPSHOT-JAR-with-dependencies.JAR --env jvm --entrypoint io.fission.HelloWorld
</code></pre>

<p>Lastly you can create a route and test that the function works!</p>

<pre><code>$ fission route create --function hello --url /hellon --method GET

$ curl $FISSION_ROUTER/hello
Hello World!
</code></pre>

<h1 id="what-s-next">What&rsquo;s next</h1>

<ul>
<li>More examples can be found in <a href="https://github.com/fission/fission/tree/master/examples/jvm/">examples directory on GitHub</a></li>
</ul>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        

        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/0.11.0/js/clipboard.min.js?1538416554"></script>
    <script src="/0.11.0/js/perfect-scrollbar.min.js?1538416554"></script>
    <script src="/0.11.0/js/perfect-scrollbar.jquery.min.js?1538416554"></script>
    <script src="/0.11.0/js/jquery.sticky.js?1538416554"></script>
    <script src="/0.11.0/js/featherlight.min.js?1538416554"></script>
    <script src="/0.11.0/js/html5shiv-printshiv.min.js?1538416554"></script>
    <script src="/0.11.0/js/highlight.pack.js?1538416554"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/0.11.0/js/modernizr.custom.71422.js?1538416554"></script>
    <script src="/0.11.0/js/learn.js?1538416554"></script>
    <script src="/0.11.0/js/hugo-learn.js?1538416554"></script>

    <link href="/0.11.0/mermaid/mermaid.css?1538416554" type="text/css" rel="stylesheet" />
    <script src="/0.11.0/mermaid/mermaid.js?1538416554"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-86980724-1', 'auto');
  ga('send', 'pageview');
</script>

<script type="text/javascript" src="//script.crazyegg.com/pages/scripts/0059/9755.js" async="async"></script>

  </body>
</html>

