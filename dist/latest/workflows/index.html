<!DOCTYPE html>
<html>
  <head>
    <title>Serverless Functions for Kubernetes</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="google-site-verification" content="5AvQfeDvIx0ldE9uSKVsoikqgFknd_CT18caf9TNoVg" />
<meta name="generator" content="Hugo 0.49" />
<title>Fission Workflows :: Serverless Functions for Kubernetes</title>
<link rel="shortcut icon" href="/latest/images/favicon.png" type="image/x-icon" />
<link href="/latest/css/font-awesome.min.css" rel="stylesheet">
<link href="/latest/css/nucleus.css" rel="stylesheet">
<link href="/latest/theme-flex/style.css" rel="stylesheet">

	


<link rel="stylesheet" href="/latest/css/hybrid.css?1540653045">
<script src="/latest/syntax-highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<link rel="stylesheet" href="/latest/css/bootstrap.min.css">
<script src="/latest/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/docs.fission.io\/latest";
</script>
<meta name="description" content="Documentation for Fission">
<meta name="author" content="Fission">


    
  </head>
  <body data-url="/latest/workflows/">
    
      <header>
  <div class="logo">
    
	
	
	
  
    
  
    
  


<img src="/latest/images/fission-logo.png"/>

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/fission/fission"  rel="noopener">
                  <i class='fa fa-fw fa-github'></i> Github repo
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/fission/fission/graphs/contributors"  rel="noopener">
                  <i class='fa fa-fw fa-bullhorn'></i> Credits
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/latest/" class="dd-item">
          <a href="/latest/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/latest/installation/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/latest/installation/">Installing Fission</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/installation/kubernetessetup/" class="dd-item">
        <div>
          <a href="/latest/installation/kubernetessetup/">
            Kubernetes Quick Install
          </a>
        </div>
    </li>
    <li data-nav-id="/latest/installation/upgrade/" class="dd-item
        ">
      <div>
      <a href="/latest/installation/upgrade/">Upgrading Fission</a>
      </div>
    </li>
      <li data-nav-id="/latest/installation/env_vars/" class="dd-item">
        <div>
          <a href="/latest/installation/env_vars/">
            Environment Variables
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/concepts/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/latest/concepts/">Fission Concepts</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/concepts/basic-concept/" class="dd-item">
        <div>
          <a href="/latest/concepts/basic-concept/">
            Basic Concepts
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/concepts/executor/" class="dd-item">
        <div>
          <a href="/latest/concepts/executor/">
            Function Executors
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/usage/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/latest/usage/">Using Fission</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/usage/accessing-url-params/" class="dd-item">
        <div>
          <a href="/latest/usage/accessing-url-params/">
            Accessing URL parameters
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/package/" class="dd-item">
        <div>
          <a href="/latest/usage/package/">
            Packaging source code
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/access-secret-cfgmap-in-function/" class="dd-item">
        <div>
          <a href="/latest/usage/access-secret-cfgmap-in-function/">
            Accessing Secrets in Functions
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/environments/" class="dd-item">
        <div>
          <a href="/latest/usage/environments/">
            Environments
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/functions/" class="dd-item">
        <div>
          <a href="/latest/usage/functions/">
            Functions
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/trigger/" class="dd-item">
        <div>
          <a href="/latest/usage/trigger/">
            Triggers
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/executor/" class="dd-item">
        <div>
          <a href="/latest/usage/executor/">
            Controlling Function Execution
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/developer-workflow/" class="dd-item">
        <div>
          <a href="/latest/usage/developer-workflow/">
            Source Code Organization and Your Development Workflow
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/ingress-tutorial/" class="dd-item">
        <div>
          <a href="/latest/usage/ingress-tutorial/">
            Exposing functions with Ingress
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/canary-deployments/" class="dd-item">
        <div>
          <a href="/latest/usage/canary-deployments/">
            Supporting Canary Deployments for Fission Functions
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/usage/kafka-trigger-tutorial/" class="dd-item">
        <div>
          <a href="/latest/usage/kafka-trigger-tutorial/">
            Using Kafka trigger to invoke a Function
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/languages/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/latest/languages/">Languages</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/languages/nodejs/" class="dd-item">
        <div>
          <a href="/latest/languages/nodejs/">
            Fission functions with Nodejs
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/languages/go/" class="dd-item">
        <div>
          <a href="/latest/languages/go/">
            Using Go with Fission
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/languages/java/" class="dd-item">
        <div>
          <a href="/latest/languages/java/">
            Using Java with Fission JVM environment
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/tutorial/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/latest/tutorial/">Tutorials</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/latest/tutorial/enabling-istio-on-fission/" class="dd-item">
        <div>
          <a href="/latest/tutorial/enabling-istio-on-fission/">
            Enabling Istio on Fission
          </a>
        </div>
    </li>
      <li data-nav-id="/latest/tutorial/java-example/" class="dd-item">
        <div>
          <a href="/latest/tutorial/java-example/">
            Building Java Functions
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/latest/workflows/" class="dd-item parent active
        ">
      <div>
      <a href="/latest/workflows/">Fission Workflows</a>
      </div>
    </li>
    <li data-nav-id="/latest/contributing/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/latest/contributing/">Contributing to Fission</a>
      </div>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/latest/installation/" >
   Installing Fission</option> 
      <option value="/latest/installation/kubernetessetup/" >- Kubernetes Quick Install</option>
    <option value="/latest/installation/upgrade/" >
  - 
   Upgrading Fission</option>
      <option value="/latest/installation/env_vars/" >- Environment Variables</option>
  
    <option value="/latest/concepts/" >
   Fission Concepts</option> 
      <option value="/latest/concepts/basic-concept/" >- Basic Concepts</option>
      <option value="/latest/concepts/executor/" >- Function Executors</option>
  
    <option value="/latest/usage/" >
   Using Fission</option> 
      <option value="/latest/usage/accessing-url-params/" >- Accessing URL parameters</option>
      <option value="/latest/usage/package/" >- Packaging source code</option>
      <option value="/latest/usage/access-secret-cfgmap-in-function/" >- Accessing Secrets in Functions</option>
      <option value="/latest/usage/environments/" >- Environments</option>
      <option value="/latest/usage/functions/" >- Functions</option>
      <option value="/latest/usage/trigger/" >- Triggers</option>
      <option value="/latest/usage/executor/" >- Controlling Function Execution</option>
      <option value="/latest/usage/developer-workflow/" >- Source Code Organization and Your Development Workflow</option>
      <option value="/latest/usage/ingress-tutorial/" >- Exposing functions with Ingress</option>
      <option value="/latest/usage/canary-deployments/" >- Supporting Canary Deployments for Fission Functions</option>
      <option value="/latest/usage/kafka-trigger-tutorial/" >- Using Kafka trigger to invoke a Function</option>
  
    <option value="/latest/languages/" >
   Languages</option> 
      <option value="/latest/languages/nodejs/" >- Fission functions with Nodejs</option>
      <option value="/latest/languages/go/" >- Using Go with Fission</option>
      <option value="/latest/languages/java/" >- Using Java with Fission JVM environment</option>
  
    <option value="/latest/tutorial/" >
   Tutorials</option> 
      <option value="/latest/tutorial/enabling-istio-on-fission/" >- Enabling Istio on Fission</option>
      <option value="/latest/tutorial/java-example/" >- Building Java Functions</option>
  
    <option value="/latest/workflows/"  selected>
   Fission Workflows</option> 
  
    <option value="/latest/contributing/" >
   Contributing to Fission</option> 
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/latest/js/lunr.min.js"></script>
        <script type="text/javascript" src="/latest/js/auto-complete.js"></script>
        <link href="/latest/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/docs.fission.io\/latest";
          
        </script>
        <script type="text/javascript" src="/latest/js/search.js"></script>
      </div>


    <h1>Fission Workflows</h1>

    
    
    



<h3 id="prerequisites">Prerequisites</h3>

<p>Fission Workflows requires the following components to be installed on your local machine:</p>

<ul>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">kubectl</a></li>
<li><a href="https://github.com/kubernetes/helm">helm</a></li>
</ul>

<p>Fission Workflows is deployed on top of a Kubernetes cluster.
If you don&rsquo;t have a Kubernetes cluster, <a href="/latest/installation/kubernetessetup/">here&rsquo;s a quick guide to set one up</a>.
It also requires a <a href="https://github.com/fission/fission">Fission</a> deployment to be present on your Kubernetes cluster.
If you do not have a Fission deployment, follow <a href="../installation/">Fission&rsquo;s installation guide</a>.</p>

<p><strong>(Note that Fission Workflows 0.6.0 requires Fission 0.4.1 or higher, with the NATS component installed!)</strong></p>

<h3 id="installing-fission-workflows">Installing Fission Workflows</h3>

<p>Fission Workflows is an add-on to Fission. You can install both
Fission and Fission Workflows using helm charts.</p>

<p>Assuming you have your Kubernetes cluster set up with a functioning deployment of Fission 0.4.1 or higher, run the following commands:</p>

<pre><code class="language-bash"># If you haven't already, add the Fission charts repo
$ helm repo add fission-charts https://fission.github.io/fission-charts/

$ helm repo update

# Install Fission Workflows
$ helm install --wait -n fission-workflows fission-charts/fission-workflows --version 0.6.0
</code></pre>

<h3 id="creating-your-first-workflow">Creating your first workflow</h3>

<p>After installing Fission and Workflows, you&rsquo;re all set to run a simple
test workflow.
With the following code snippet you will be able to deploy and run a small workflow example:</p>

<pre><code class="language-bash"># Fetch the required files, alternatively you could clone the fission-workflow repo
$ curl https://raw.githubusercontent.com/fission/fission-workflows/0.6.0/examples/whales/fortune.sh &gt; fortune.sh

$ curl https://raw.githubusercontent.com/fission/fission-workflows/0.6.0/examples/whales/whalesay.sh &gt; whalesay.sh

$ curl https://raw.githubusercontent.com/fission/fission-workflows/0.6.0/examples/whales/fortunewhale.wf.yaml &gt; fortunewhale.wf.yaml

#
# Add binary environment and create two test functions on your Fission setup:
#
$ fission env create --name binary --image fission/binary-env

$ fission function create --name whalesay --env binary --deploy ./whalesay.sh

$ fission function create --name fortune --env binary --deploy ./fortune.sh

#
# Create a workflow that uses those two functions. A workflow is just
# a function that uses the &quot;workflow&quot; environment.
#
$ fission function create --name fortunewhale --env workflow --src ./fortunewhale.wf.yaml

#
# Map an HTTP GET to your new workflow function:
#
$ fission route create --method GET --url /fortunewhale --function fortunewhale

#
# Invoke the workflow with an HTTP request:
#
$ curl ${FISSION_ROUTER}/fortunewhale
</code></pre>

<p>This last command, the invocation of the workflow, should return a whale saying something wise</p>

<pre><code> ______________________________________
/ Anthony's Law of Force:              \
|                                      |
\ Don't force it; get a larger hammer. /
 --------------------------------------
    \
     \
      \
                    ##         .
              ## ## ##        ==
           ## ## ## ## ##    ===
       /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\___/ ===
      {                       /  ===-
       \______ O           __/
         \    \         __/
          \____\_______/
</code></pre>

<p>So what happened here?
Let&rsquo;s see what the workflow consists of (for example by running <code>cat fortunewhale.wf.yaml</code>):</p>

<pre><code class="language-yaml"># This whale shows off a basic workflow that combines both Fission Functions (fortune, whalesay) and internal functions (noop)
apiVersion: 1
output: WhaleWithFortune
tasks:
  InternalFuncShowoff:
    run: noop

  GenerateFortune:
    run: fortune
    requires:
    - InternalFuncShowoff

  WhaleWithFortune:
    run: whalesay
    inputs: &quot;{$.Tasks.GenerateFortune.Output}&quot;
    requires:
    - GenerateFortune
</code></pre>

<p>What you see is the <a href="http://yaml.org/">YAML</a>-based workflow definition of the <code>fortunewhale</code> workflow.
A workflow consists of multiple tasks, which are steps that it needs to complete.
Each task has a unique identifier, such as <code>GenerateFortune</code>, a reference to a Fission function in the <code>run</code> field.
Optionally, it can contain <code>inputs</code> which allows you to specify inputs to the task,
as well as contain <code>requires</code> which allows you to specify which tasks need to complete before this task can start.
Finally, at the top you will find the <code>output</code> field, which specifies the task whose output is used as the workflow&rsquo;s output.</p>

<p>In this case, the <code>fortunewhale</code> workflow consists of a sequence of 3 tasks:</p>

<pre><code>InternalFuncShowoff -&gt; GenerateFortune -&gt; WhaleWithFortune
</code></pre>

<p>First, it starts with <code>InternalFuncShowoff</code> by running <code>noop</code>, which is an <em>internal function</em> in the workflow engine.
Internal functions are run inside of the workflow engine, which makes them run much faster at the cost of expressiveness and scalability.
So typically, light-weight functions, such as logic or control flow operations, are good candidates to be used as internal functions.
Besides, a minimal set of predefined internal functions, you can define internal function - there is nothing special about them.</p>

<p>After <code>InternalFuncShowff</code> completes, the <code>GenerateFortune</code> task can start as its <code>requires</code> has been fulfilled.
It runs the <code>fortune</code> Fission function, which outputs a random piece of wisdom.</p>

<p>After <code>GenerateFortune</code> completes, the <code>WhaleWithFortune</code> task can start.
This task uses a javascript expression in its <code>inputs</code> to reference the output of the <code>GenerateFortune</code> task.
In the inputs of a task you can reference anything in the workflow, such as outputs, inputs, and task definitions, or just provide a constant value.
The workflow engine invokes the <code>whalesay</code> fission function with as input the piece of wisdom, which outputs the ASCI whale that wraps the phrase.</p>

<p>Finally, with all tasks completed, the workflow engine uses the top-level <code>output</code> field to fetch the output of the <code>WhaleWithFortune</code> and return it to the user.
As the workflow engine adheres to the Fission function specification, a Fission workflow is just another Fission Function.
This means that you could use this workflow as a function in the <code>run</code> in other workflows.</p>

<h3 id="what-s-next">What&rsquo;s next?</h3>

<p>To learn more about the Fission Workflows system and its advanced concepts, see the <a href="https://github.com/fission/fission-workflows/tree/master/Docs">documentation on Github</a>.</p>

<p>Or, check out the <a href="https://github.com/fission/fission-workflows/tree/0.6.0/examples">examples</a> for more example workflows.</p>

<p>If something went wrong, we&rsquo;d love to help &ndash; please <a href="http://slack.fission.io">drop by the slack channel</a> and ask for help.</p>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/latest/tutorial/java-example/" title="Building Java Functions"> <i class="fa fa-chevron-left"></i><label>Building Java Functions</label></a>
    <a class="nav nav-next" href="/latest/contributing/" title="Contributing to Fission" style="margin-right: 0px;"><label>Contributing to Fission</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

    

    
    <div class="github-link">
      <a href="https://github.com/fission/docs.fission.io/edit/master/docs/content/workflows/_index.en.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
    
  </div>


	<div>


  <p>Fission is a project by <a href="https://platform9.com/fission/">Platform9 Systems</a> and <a href="https://github.com/fission/fission/graphs/contributors">many contributors</a>. Reach us on <a href="http://slack.fission.io">Slack</a> or <a href="https://twitter.com/fissionio">Twitter</a>.</p>
 



	</div>
</footer>

<script src="/latest/js/clipboard.min.js"></script>

<link href="/latest/css/featherlight.min.css" rel="stylesheet">
<script src="/latest/js/featherlight.min.js"></script>



<script src="/latest/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>